:root{
  --topbar-h: 64px;
  --gap: 14px;
  --card: rgba(255,255,255,.06);
  --card2: rgba(255,255,255,.08);
  --border: rgba(255,255,255,.10);
  --text: #e8eefc;
  --muted: rgba(232,238,252,.7);
}

*{ box-sizing:border-box; }

html, body{
  height:100%;
  margin:0;
}

body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:#0b1220;
  color:var(--text);

  /* ✅ nada de scroll de página */
  overflow:hidden;

  /* ✅ layout: barra arriba + contenido */
  display:flex;
  flex-direction:column;
  min-height:100vh;
}

/* ============ TOPBAR (fija) ============ */
.topbar{
  height: var(--topbar-h);
  flex: 0 0 var(--topbar-h);

  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;

  padding: 10px 14px;
  border-bottom:1px solid var(--border);
  background: rgba(0,0,0,.18);
  backdrop-filter: blur(8px);
}

.topbar .left, .topbar .right{
  display:flex;
  align-items:center;
  gap:10px;
}

/* ============ MAIN (ocupa toda la pantalla restante) ============ */
.main{
  /* ✅ ocupa TODO lo que queda bajo la topbar */
  height: calc(100vh - var(--topbar-h));
  flex: 1 1 auto;

  /* ✅ aquí metemos el “scroll interno” */
  overflow:auto;

  padding: var(--gap);
}

/* Esto evita “micro-scroll” por desbordes */
.main > *{
  max-width: 100%;
}

/* ============ TARJETAS / SECCIONES ============ */
.card{
  background: var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
}

/* Si tienes 2 columnas (señales arriba, chart abajo etc.) */
.grid{
  display:grid;
  grid-template-columns: 1fr;
  gap: var(--gap);
}

/* En pantallas anchas puedes activar 2 columnas si quieres */
@media (min-width: 1200px){
  .grid.two{
    grid-template-columns: 420px 1fr;
    align-items: start;
  }
}

/* ============ CHARTS (muy importante) ============ */
/* El truco: darle una altura clara al contenedor del canvas */
.chart-card{
  background: var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;

  /* ✅ que se vea grande pero sin romper el layout */
  min-height: 420px;
}

.chart-wrap{
  position:relative;
  width:100%;
  height: 420px; /* puedes subir a 480 si quieres */
}

/* El canvas SIEMPRE ocupa el wrapper */
.chart-wrap canvas{
  width:100% !important;
  height:100% !important;
  display:block;
}

/* ============ BOTONES ============ */
button, .btn{
  cursor:pointer;
  padding: 8px 12px;
  border-radius: 10px;
  border:1px solid var(--border);
  background: rgba(255,255,255,.06);
  color: var(--text);
}

button:hover, .btn:hover{
  background: rgba(255,255,255,.10);
}

/* ================================
   WIDGET LIVE: vela-termo + reloj
   ================================ */

.live-wrap{
  background: var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:12px;
  margin: var(--gap);
}

/* Si lo metes dentro de .main, quita el margen externo */
.main .live-wrap{
  margin: 0 0 var(--gap) 0;
}

.live-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:10px;
}

.live-title{
  font-weight:800;
  letter-spacing:.3px;
}

.live-clock{
  font-variant-numeric: tabular-nums;
  font-weight:800;
  padding:6px 10px;
  border-radius:10px;
  border:1px solid var(--border);
  background: rgba(255,255,255,.06);
}

.live-body{
  display:grid;
  grid-template-columns: 90px 1fr;
  gap:14px;
  align-items:stretch;
}

/* Termómetro */
.thermo{
  position:relative;
  width:90px;
  height:240px;
  border-radius:18px;
  border:1px solid var(--border);
  background: rgba(255,255,255,.04);
  overflow:hidden;
}

/* Mecha fina (wick) */
.wick{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  width:8px;
  height:100%;
  border-radius:8px;
  background: rgba(255,255,255,.08);
}

/* Cuerpo de vela (sube/baja) */
.candle{
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:0;
  width:26px;
  height:50%;
  border-radius:14px;
  background: rgba(255,255,255,.18);
  border:1px solid rgba(255,255,255,.18);
  transition: height .45s ease;
}

/* Marcador (punto) */
.marker{
  position:absolute;
  left:50%;
  transform:translate(-50%, 50%);
  bottom:50%;
  width:14px;
  height:14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.35);
  background: rgba(255,255,255,.9);
  box-shadow: 0 0 14px rgba(255,255,255,.25);
  transition: bottom .45s ease;
}

/* Stats */
.live-stats{
  border:1px solid var(--border);
  background: rgba(255,255,255,.04);
  border-radius:14px;
  padding:12px;
  display:grid;
  gap:8px;
}

.live-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  font-variant-numeric: tabular-nums;
}

.live-row .k{
  opacity:.8;
}

.live-row .v{
  font-weight:800;
}

/* Responsive */
@media (max-width: 520px){
  .live-body{
    grid-template-columns: 1fr;
  }
  .thermo{
    width:100%;
    height:160px;
  }
}
